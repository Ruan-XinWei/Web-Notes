<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


</head>

<body>


    <select id="province">
        <option value=-1>省份</option>
    </select>

    <select id="city">
        <option value=-1>城市</option>
    </select>

    <select id="area">
        <option value=-1>区</option>
    </select>

    <script src="scripts/data.js"></script>
    <script>
        var prov = document.getElementById("province");
        var city = document.getElementById("city");
        var area = document.getElementById("area");

        function getProvince() {
            var opt = "<option value=-1>省份</option>";
            for (let i = 0; i < data.length; ++i) {
                opt += "<option value=" + i + ">" + data[i].name + "</option>";
            }
            prov.innerHTML = opt;
            prov.onchange = function () {
                getCity();
                getArea();
            }
        }

        function getCity() {
            var num = prov.options[prov.selectedIndex].value;
            var opt = "<option value=-1>城市</option>";

            if (num != -1) {
                var cy = data[num].city;
                for (let i = 0; i < cy.length; ++i) {
                    opt += "<option value=" + i + ">" + cy[i].name + "</option>"
                }
            }
            city.innerHTML = opt;
            city.onchange = function () {
                getArea();
            }
        }

        function getArea() {
            var prov_num = prov.options[prov.selectedIndex].value;
            var city_num = city.options[city.selectedIndex].value;
            var opt = "<option value=-1>区</option>";

            if (prov_num != -1 && city_num != -1) {
                var arealist = data[prov_num].city[city_num].area;
                for (let i = 0; i < arealist.length; ++i) {
                    opt += "<option value=" + i + ">" + arealist[i] + "</option>";
                }
            }
            area.innerHTML = opt;
            var alertfunction = function() {
                alert("你选择的是" + data[prov_num].name + "-" + data[prov_num].city[city_num].name + "-" +
                area.options[area.selectedIndex].innerHTML);
            }
            area.onchange = function() {
                setTimeout(alertfunction, 100);
            }
        }

        window.onload = function () {
            getProvince();
        }
    </script>
</body>

</html>